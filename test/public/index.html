<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transition: all 0.3s ease;
        }
        
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #000000;
            --text-secondary: #666666;
            --accent: #007aff;
            --card-bg: #ffffff;
            --border: #e0e0e0;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        .dark-theme {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --accent: #0a84ff;
            --card-bg: #2d2d2d;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 16px;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 24px;
            padding: 20px 0;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .theme-switcher {
            position: absolute;
            top: 16px;
            right: 16px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 8px;
            cursor: pointer;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞–Ω–∏—è */
        .task-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px var(--shadow);
            border: 1px solid var(--border);
            cursor: pointer;
        }
        
        .task-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .task-desc {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .task-reward {
            font-size: 20px;
            font-weight: bold;
            color: #4CAF50;
            text-align: right;
        }
        
        /* –ë–∞–ª–∞–Ω—Å */
        .balance-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid var(--border);
            box-shadow: 0 4px 20px var(--shadow);
        }
        
        .balance-amount {
            font-size: 32px;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            margin: 8px 0;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è - –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –í–ù–ò–ó–£ */
        .nav {
            display: flex;
            justify-content: space-around;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 16px;
            position: fixed;
            bottom: 16px;
            left: 16px;
            right: 16px;
            box-shadow: 0 -4px 20px var(--shadow);
            border: 1px solid var(--border);
            z-index: 1000;
        }
        
        .nav-item {
            text-align: center;
            cursor: pointer;
            padding: 10px 16px;
            border-radius: 12px;
            flex: 1;
            margin: 0 4px;
        }
        
        .nav-item.active {
            background: var(--accent);
        }
        
        .nav-item.active .nav-icon,
        .nav-item.active .nav-text {
            color: white;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
            color: var(--text-secondary);
        }
        
        .nav-text {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏—è */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px var(--shadow);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .modal-reward {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .modal-desc {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .modal-url {
            background: var(--bg-secondary);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            word-break: break-all;
            font-size: 14px;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .modal-actions {
            display: flex;
            gap: 12px;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid var(--border);
            box-shadow: 0 4px 20px var(--shadow);
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 16px;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            font-weight: bold;
        }
        
        .profile-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .profile-username {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: var(--bg-secondary);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>–ß—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ</h1>
            <p>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤—ã–ø–æ–ª–Ω—è—è –∑–∞–¥–∞–Ω–∏—è</p>
            <div class="theme-switcher" onclick="toggleTheme()">
                üåô
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –ó–∞–¥–∞–Ω–∏—è -->
        <div id="tasks-tab" class="tab-content active">
            <div class="balance-card">
                <div style="color: var(--text-secondary);">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
                <div class="balance-amount" id="user-balance">0 ‚ÇΩ</div>
                <button class="btn" onclick="withdrawMoney()">–í—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏</button>
            </div>
            
            <div id="tasks-container">
                <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –§–∏–ª—å—Ç—Ä -->
        <div id="filter-tab" class="tab-content">
            <div class="balance-card">
                <h3 style="margin-bottom: 16px; color: var(--text-primary);">–§–∏–ª—å—Ç—Ä –∑–∞–¥–∞–Ω–∏–π</h3>
                
                <div style="margin-bottom: 16px;">
                    <div style="font-weight: bold; margin-bottom: 8px; color: var(--text-primary);">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <span style="background: var(--accent); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px;">–í—Å–µ</span>
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</span>
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">–ü–æ–∫—É–ø–∫–∏</span>
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <div style="font-weight: bold; margin-bottom: 8px; color: var(--text-primary);">–ù–∞–≥—Ä–∞–¥–∞:</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">–õ—é–±–∞—è</span>
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">50+ ‚ÇΩ</span>
                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 8px 16px; border-radius: 20px; font-size: 14px;">100+ ‚ÇΩ</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profile-tab" class="tab-content">
            <div class="profile-card">
                <div class="avatar" id="user-avatar">üë§</div>
                <div class="profile-name" id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="profile-username" id="user-username">@username</div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="completed-tasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="available-tasks">12</div>
                        <div class="stat-label">–î–æ—Å—Ç—É–ø–Ω–æ</div>
                    </div>
                </div>
                
                <button class="btn" onclick="showProfileSettings()">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</button>
            </div>
            
            <div class="balance-card">
                <h3 style="margin-bottom: 16px; color: var(--text-primary);">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h3>
                <div style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; margin-bottom: 16px; border: 1px solid var(--border);">
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</div>
                    <div style="word-break: break-all; font-weight: bold; color: var(--text-primary);">https://t.me/your_bot?start=ref123456</div>
                </div>
                <button class="btn btn-secondary" onclick="copyRefLink()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏—è -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title" id="modal-task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</div>
                    <div class="modal-reward" id="modal-task-reward">+0 ‚ÇΩ</div>
                </div>
                
                <div class="modal-desc" id="modal-task-desc">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è...</div>
                
                <div style="margin-bottom: 16px;">
                    <div style="font-weight: bold; margin-bottom: 8px; color: var(--text-primary);">–°—Å—ã–ª–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</div>
                    <div class="modal-url" id="modal-task-url">https://example.com</div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn" onclick="startTask()">–ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
                </div>
            </div>
        </div>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è - –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –í–ù–ò–ó–£ -->
        <div class="nav">
            <div class="nav-item active" onclick="showTab('tasks')">
                <div class="nav-icon">üìã</div>
                <div class="nav-text">–ó–∞–¥–∞–Ω–∏—è</div>
            </div>
            <div class="nav-item" onclick="showTab('filter')">
                <div class="nav-icon">‚ö°</div>
                <div class="nav-text">–§–∏–ª—å—Ç—Ä</div>
            </div>
            <div class="nav-item" onclick="showTab('profile')">
                <div class="nav-icon">üë§</div>
                <div class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userData = {
            balance: 1250,
            completedTasks: 8,
            availableTasks: 12
        };
        
        // –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏–π
        const tasks = [
            { 
                id: 1, 
                title: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ", 
                desc: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ. –≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ –±–æ–ª–µ–µ 3 –º–∏–Ω—É—Ç.", 
                reward: 50, 
                url: "https://example.com/offer1",
                category: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"
            },
            { 
                id: 2, 
                title: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ", 
                desc: "–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ App Store –∏–ª–∏ Google Play. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É.", 
                reward: 100, 
                url: "https://example.com/offer2",
                category: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
            },
            { 
                id: 3, 
                title: "–û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑", 
                desc: "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω, –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø–æ–∫—É–ø–∫—É. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ - 500 —Ä—É–±–ª–µ–π.", 
                reward: 200, 
                url: "https://example.com/offer3",
                category: "–ü–æ–∫—É–ø–∫–∏"
            },
            { 
                id: 4, 
                title: "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª", 
                desc: "–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à Telegram –∫–∞–Ω–∞–ª –∏ –æ—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –º–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π. –ù–µ –æ—Ç–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏!", 
                reward: 30, 
                url: "https://t.me/example_channel",
                category: "–°–æ—Ü—Å–µ—Ç–∏"
            },
            { 
                id: 5, 
                title: "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É", 
                desc: "–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –∞–Ω–∫–µ—Ç—ã —á–µ—Å—Ç–Ω–æ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ. –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–º–æ–≥—É—Ç —É–ª—É—á—à–∏—Ç—å –Ω–∞—à–∏ —É—Å–ª—É–≥–∏.", 
                reward: 75, 
                url: "https://example.com/survey1",
                category: "–û–ø—Ä–æ—Å—ã"
            },
            { 
                id: 6, 
                title: "–û—Ñ–æ—Ä–º–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É", 
                desc: "–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ 7 –¥–Ω–µ–π. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –µ—ë –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.", 
                reward: 150, 
                url: "https://example.com/subscribe",
                category: "–ü–æ–¥–ø–∏—Å–∫–∏"
            }
        ];
        
        // –¢–µ–∫—É—â–µ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
        let currentTask = null;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            initTelegramWebApp();
            loadTasks();
            updateUserData();
            loadUserProfile();
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        function initTelegramWebApp() {
            try {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                Telegram.WebApp.enableClosingConfirmation();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ç–µ–º—É Telegram
                Telegram.WebApp.setHeaderColor('#007aff');
                Telegram.WebApp.setBackgroundColor('#f8f9fa');
                
            } catch (error) {
                console.log('Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        function loadUserProfile() {
            try {
                const user = Telegram.WebApp.initDataUnsafe.user;
                if (user) {
                    document.getElementById('user-name').textContent = 
                        user.first_name + (user.last_name ? ' ' + user.last_name : '');
                    
                    document.getElementById('user-username').textContent = 
                        user.username ? '@' + user.username : '–ë–µ–∑ username';
                    
                    // –°–æ–∑–¥–∞–µ–º –∞–≤–∞—Ç–∞—Ä –∏–∑ –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ –∏–º–µ–Ω–∏
                    const firstName = user.first_name || '';
                    const lastName = user.last_name || '';
                    const avatarText = (firstName.charAt(0) + (lastName ? lastName.charAt(0) : '')).toUpperCase();
                    document.getElementById('user-avatar').textContent = avatarText;
                }
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–¥–∞–Ω–∏—è
        function loadTasks() {
            const container = document.getElementById('tasks-container');
            container.innerHTML = '';
            
            tasks.forEach(task => {
                const taskHTML = `
                    <div class="task-card" onclick="openTaskModal(${task.id})">
                        <div class="task-title">${task.title}</div>
                        <div class="task-desc">${task.desc}</div>
                        <div class="task-reward">+${task.reward} ‚ÇΩ</div>
                    </div>
                `;
                container.innerHTML += taskHTML;
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserData() {
            document.getElementById('user-balance').textContent = userData.balance + ' ‚ÇΩ';
            document.getElementById('completed-tasks').textContent = userData.completedTasks;
            document.getElementById('available-tasks').textContent = userData.availableTasks;
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏—è
        function openTaskModal(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                currentTask = task;
                
                document.getElementById('modal-task-title').textContent = task.title;
                document.getElementById('modal-task-desc').textContent = task.desc;
                document.getElementById('modal-task-reward').textContent = '+' + task.reward + ' ‚ÇΩ';
                document.getElementById('modal-task-url').textContent = task.url;
                
                document.getElementById('task-modal').style.display = 'flex';
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function closeModal() {
            document.getElementById('task-modal').style.display = 'none';
            currentTask = null;
        }
        
        // –ù–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
        function startTask() {
            if (currentTask) {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
                window.open(currentTask.url, '_blank');
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                closeModal();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification('–ó–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ! –í–µ—Ä–Ω–∏—Ç–µ—Å—å –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.');
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme() {
            const body = document.body;
            const themeSwitcher = document.querySelector('.theme-switcher');
            
            if (body.classList.contains('dark-theme')) {
                body.classList.remove('dark-theme');
                themeSwitcher.textContent = 'üåô';
                Telegram.WebApp.setBackgroundColor('#f8f9fa');
            } else {
                body.classList.add('dark-theme');
                themeSwitcher.textContent = '‚òÄÔ∏è';
                Telegram.WebApp.setBackgroundColor('#1a1a1a');
            }
        }
        
        // –í—ã–≤–æ–¥ –¥–µ–Ω–µ–≥
        function withdrawMoney() {
            showNotification('–§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!');
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function showProfileSettings() {
            showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
        function copyRefLink() {
            navigator.clipboard.writeText('https://t.me/your_bot?start=ref123456')
                .then(() => showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!'))
                .catch(() => showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É'));
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            Telegram.WebApp.showAlert(message);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        document.getElementById('task-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>